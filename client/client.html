 <!DOCTYPE html>
<html lang="en">

<head>
  <title>SP500 Companies API Test Application</title>
  <link rel="stylesheet" type="text/css" href="/style.css">

  <script>
    const init = () => {
      // Toggle endpoint sections
      const endpointHeaders = document.querySelectorAll('.endpoint-header');
      endpointHeaders.forEach(header => {
        header.addEventListener('click', () => {
          const endpoint = header.parentElement;
          const testSection = endpoint.querySelector('.test-section');
          if (testSection) {
            testSection.classList.toggle('expanded');
          }
        });
      });

      // Handle form submissions
      const sendButtons = document.querySelectorAll('.send-request');
      sendButtons.forEach(button => {
        button.addEventListener('click', () => {
          const form = button.closest('form');
          const endpoint = button.closest('.endpoint');
          const resultDiv = endpoint.querySelector('.result');
          const endpointPath = endpoint.querySelector('.endpoint-path').textContent;

          // Get form data
          const inputs = form.querySelectorAll('input[type="text"]');
          const methodRadios = form.querySelectorAll('input[name^="method"]');

          let method = 'GET';
          methodRadios.forEach(radio => {
            if (radio.checked) method = radio.value;
          });

          // Build URL with query params
          let url = endpointPath;
          const params = new URLSearchParams();
          inputs.forEach(input => {
            if (input.value) {
              params.append(input.name, input.value);
            }
          });
          if (params.toString()) url += '?' + params.toString();

          // Make request
          fetch(url, { method })
            .then(response => response.text())
            .then(data => {
              resultDiv.textContent = data;
            })
            .catch(error => {
              resultDiv.textContent = `Error: ${error}`;
            });
        });
      });
    };

    window.onload = init;
  </script>
</head>

<body>
  <div class="header-links">
    <a href="/test">Test the Application Here</a>
    <a href="/docs">View the Documentation Here</a>
  </div>

  <h1>SP500 Companies API Test Application</h1>

  <div class="endpoint">
    <div class="endpoint-header">
      <span class="endpoint-path">/api/getAllCompanies</span>
      <span class="method get">GET</span>
      <span class="method head">HEAD</span>
    </div>
    <div class="test-section">
      <h2>Test This Endpoint</h2>
      <p>Get all SP500 companies with their ticker and name.</p>
      <form>
        <div class="radio-group">
          <label><input type="radio" name="method-1" value="GET" checked> GET</label>
          <label><input type="radio" name="method-1" value="HEAD"> HEAD</label>
        </div>
        <button type="button" class="send-request">Send Request</button>
      </form>
      <div class="result"></div>
    </div>
  </div>

  <div class="endpoint">
    <div class="endpoint-header">
      <span class="endpoint-path">/api/getCompaniesBySector</span>
      <span class="method get">GET</span>
      <span class="method head">HEAD</span>
    </div>
    <div class="test-section">
      <h2>Test This Endpoint</h2>
      <p>Get companies filtered by sector (e.g., Technology, Healthcare, Financials).</p>
      <form>
        <label>
          Sector: <input type="text" name="sector" placeholder="e.g., Technology">
        </label>
        <div class="radio-group">
          <label><input type="radio" name="method-2" value="GET" checked> GET</label>
          <label><input type="radio" name="method-2" value="HEAD"> HEAD</label>
        </div>
        <button type="button" class="send-request">Send Request</button>
      </form>
      <div class="result"></div>
    </div>
  </div>

  <div class="endpoint">
    <div class="endpoint-header">
      <span class="endpoint-path">/api/getCompaniesByMarketCap</span>
      <span class="method get">GET</span>
      <span class="method head">HEAD</span>
    </div>
    <div class="test-section">
      <h2>Test This Endpoint</h2>
      <p>Get companies with market cap greater than specified value (in billions).</p>
      <form>
        <label>
          Min Market Cap (billions): <input type="text" name="minMarketCap" placeholder="e.g., 100">
        </label>
        <div class="radio-group">
          <label><input type="radio" name="method-3" value="GET" checked> GET</label>
          <label><input type="radio" name="method-3" value="HEAD"> HEAD</label>
        </div>
        <button type="button" class="send-request">Send Request</button>
      </form>
      <div class="result"></div>
    </div>
  </div>

  <div class="endpoint">
    <div class="endpoint-header">
      <span class="endpoint-path">/api/getCompanyBySymbol</span>
      <span class="method get">GET</span>
      <span class="method head">HEAD</span>
    </div>
    <div class="test-section">
      <h2>Test This Endpoint</h2>
      <p>Get detailed information about a specific company by ticker symbol.</p>
      <form>
        <label>
          Ticker Symbol: <input type="text" name="symbol" placeholder="e.g., AAPL">
        </label>
        <div class="radio-group">
          <label><input type="radio" name="method-4" value="GET" checked> GET</label>
          <label><input type="radio" name="method-4" value="HEAD"> HEAD</label>
        </div>
        <button type="button" class="send-request">Send Request</button>
      </form>
      <div class="result"></div>
    </div>
  </div>

  <div class="endpoint">
    <div class="endpoint-header">
      <span class="endpoint-path">/api/getCompaniesByIndustry</span>
      <span class="method get">GET</span>
      <span class="method head">HEAD</span>
    </div>
    <div class="test-section">
      <h2>Test This Endpoint</h2>
      <p>Get companies filtered by industry (e.g., Semiconductors, Software - Infrastructure).</p>
      <form>
        <label>
          Industry: <input type="text" name="industry" placeholder="e.g., Semiconductors">
        </label>
        <div class="radio-group">
          <label><input type="radio" name="method-5" value="GET" checked> GET</label>
          <label><input type="radio" name="method-5" value="HEAD"> HEAD</label>
        </div>
        <button type="button" class="send-request">Send Request</button>
      </form>
      <div class="result"></div>
    </div>
  </div>

  <div class="endpoint">
    <div class="endpoint-header">
      <span class="endpoint-path">/api/getTopCompaniesByRevenue</span>
      <span class="method get">GET</span>
      <span class="method head">HEAD</span>
    </div>
    <div class="test-section">
      <h2>Test This Endpoint</h2>
      <p>Get top companies sorted by revenue growth, optionally filtered by sector.</p>
      <form>
        <label>
          Limit: <input type="text" name="limit" placeholder="e.g., 10">
        </label>
        <label>
          Sector (optional): <input type="text" name="sector" placeholder="e.g., Technology">
        </label>
        <div class="radio-group">
          <label><input type="radio" name="method-6" value="GET" checked> GET</label>
          <label><input type="radio" name="method-6" value="HEAD"> HEAD</label>
        </div>
        <button type="button" class="send-request">Send Request</button>
      </form>
      <div class="result"></div>
    </div>
  </div>

  <footer>
    Yuri Korolev - 2025 - IGME 430 Project 1
  </footer>
</body>

</html>